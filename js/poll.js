 var pollques = new Array(); var cur_poll; var popupwidth = parseInt($(window).width()*90/100); var popupwidth1 = parseInt(popupwidth*90/100); var popupleft = parseInt($(window).width()*5/100); $(function(){     $.post(base_url+'/user/ajs/getpolllllResult',{},function(res){         $('#pollAll').html(res);         $.post(base_url+'/user/ajs/getpolllllResult1',{},function(res1){             var result = eval('('+res1+')');             var i=0;             for(n in result){                 var chartId = $('#pollresults'+n).find('canvas').attr('id');                 var chart = new Chart($('#'+chartId).get(0).getContext("2d")).Pie(result[n],[]);                 $('#'+chartId).attr('height',popupwidth1);                 $('#'+chartId).attr('width',popupwidth1);                 $('#'+chartId).css('width',popupwidth1);                 $('#'+chartId).css('height',popupwidth1);                 $('#pollresults'+n).css('width','90%');                 $('#pollresults'+n).css('left','5%');                 i++;             }         });     }); });function showdailypoll(){  $.post(base_url+'/user/ajs/getpolldet',{},function(res){       //alert(res);        var result = eval('('+res+')');            pollques = result;            if(pollques.length > 0){          cur_poll = 0;           showques();        }else{            bootbox.dialog('NO POLLS ARE AVAILABLE.');             setTimeout(function(){ bootbox.hideAll(); },5000);       }               });} //for group daily poll function showgroupdailypoll(groupid){     $.post(base_url+'/user/ajs/getgrouppolldet',{groupid:groupid},function(res){         //alert(res);         var result = eval('('+res+')');         pollques = result;         if(pollques.length > 0){             cur_poll = 0;             showques();         }else{             bootbox.dialog('NO POLLS ARE AVAILABLE.');             setTimeout(function(){ bootbox.hideAll(); },5000);         }     }); }function showques(){    $('.modal').modal('hide');     if(pollques.length > cur_poll){   $.post(base_url+'/user/ajs/showpolldet',{poll_id:pollques[cur_poll]},function(res){cur_poll++;        $("#pollmodal").find(".modal-body").html(res);    $("#pollmodal").modal('show');    $("#pollmodal").css('width','90%');    $("#pollmodal").css('left','5%');        $('body').attr('onload','noBack()');        $('body').attr('onunload',' ');        $('body').attr('onpageshow','if (event.persisted) noBack();');        $(".bootbox").on("hide", function() {            $('body').removeAttr('onload');            $('body').removeAttr('onunload');            $('body').removeAttr('onpageshow');        });});}else{        cur_poll = 0;         showques();  }}function pollvote(obj){     var poll_id = $(obj).attr('ques_id');     var radioL =  $(obj).parent().parent().find('.radio_ans:checked');         if(radioL.length > 0){              var ans_id = radioL.attr('ans_id');                 $.post(base_url+'/user/ajs/savevote',{poll_id:poll_id,ans_id:ans_id},function(res){                     $("#pollmodal").modal('hide');                     $('.modal-backdrop').remove();                  showques();                 });         }else{             alert("select any one answer");         }         }function showpollres(poll_id){    $("#pollmodal").modal('hide');    var popupwidth1 = parseInt($(window).width()*90/100);    var popupwidth11 = parseInt(popupwidth1*90/100);    $.post(base_url+'/user/ajs/getpolllllResultById',{'id':poll_id},function(res1){        var result = eval('('+res1+')');        var i=0;        for(n in result){            var chartId = $('#pollresults'+n).find('canvas').attr('id');            $('#'+chartId).attr('height',popupwidth11);            $('#'+chartId).attr('width',popupwidth11);            $('#'+chartId).css('width',popupwidth11);            $('#'+chartId).css('height',popupwidth11);            var chart = new Chart($('#'+chartId).get(0).getContext("2d")).Pie(result[n],[]);            var i=0;            var html2 = '';            for(m in result[n]){                html2 += '<span class="chart-label" style="background-color: '+result[n][m]['color']+'">'+result[n][m]['label']+'</span>';            }            $('#pollresults'+n).find('.labels').html(html2);        }        $('#pollresults'+poll_id).modal('show');    });    }